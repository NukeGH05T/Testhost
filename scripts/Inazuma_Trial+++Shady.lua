local PATH = "tp_idx.txt"
local Vector3 = CS.UnityEngine.Vector3

local function show(msg)
  if CS and CS.MoleMole and CS.MoleMole.ActorUtils and CS.MoleMole.ActorUtils.ShowMessage then
    CS.MoleMole.ActorUtils.ShowMessage(tostring(msg))
  else
    print(tostring(msg))
  end
end
local W = {
  {name = "shady1", x = -3629.435059, y = 280.918671, z = -3068.680908},
  {name = "shady2", x = -3771.924561, y = 201.169006, z = -3134.459229},
  {name = "shady3", x = -6335.327637, y = 400.477844, z = -2675.246826},
  {name = "shady4", x = -3290.839111, y = 223.188751, z = -3403.371826},
  {name = "shady5", x = -3279.309082, y = 201.308990, z = -3648.386475},
  {name = "shady6", x = -3769.339355, y = 200.977493, z = -3485.292480},
  {name = "shady7", x = -3448.528809, y = 201.171249, z = -3406.302246},
  {name = "shady8", x = -3456.852051, y = 202.629532, z = -3330.307861},
  {name = "shady9", x = -3588.480713, y = 217.856812, z = -3302.399170},
  {name = "shady10", x = -3426.049561, y = 201.174149, z = -2941.417236},
  {name = "shady11", x = -3488.948242, y = 224.450684, z = -3088.543945},
  {name = "shady12", x = -3712.208740, y = 201.445618, z = -3137.946045},
  {name = "shady13", x = -3673.928955, y = 270.625153, z = -2999.668213},
  {name = "shady14", x = -2945.436035, y = 200.921066, z = -3312.234863},
  {name = "shady15", x = -4005.409668, y = 218.637054, z = -2131.244873},
  {name = "shady16", x = -3792.501465, y = 206.665741, z = -2759.529541},
  {name = "shady17", x = -4002.290039, y = 248.652374, z = -2437.862549},
  {name = "shady18", x = -4097.115723, y = 221.870056, z = -2436.549805},
  {name = "shady19", x = -3824.170410, y = 283.567383, z = -2436.901611},
  {name = "shady20", x = -3872.354980, y = 315.203094, z = -2348.999023},
  {name = "shady21", x = -3785.606689, y = 269.180145, z = -3196.958252},
  {name = "shady22", x = -3562.446045, y = 214.329514, z = -2001.463745},
  {name = "shady23", x = -2640.785156, y = 219.733566, z = -4134.811523},
  {name = "shady24", x = -2610.685791, y = 230.242249, z = -4278.925781},
  {name = "shady25", x = -3011.451172, y = 209.312897, z = -3935.904785},
  {name = "shady26", x = -2804.647461, y = 200.888992, z = -4694.136230},
  {name = "shady27", x = -2699.979980, y = 231.553909, z = -4443.861816},
  {name = "shady28", x = -2786.057129, y = 206.117996, z = -4203.229980},
  {name = "shady29", x = -2573.231689, y = 320.838593, z = -4541.520996},
  {name = "shady30", x = -2642.832520, y = 219.485748, z = -4137.641602},
  {name = "shady31", x = -3291.350098, y = 223.197296, z = -3403.360840},
  {name = "shady32", x = -3913.168457, y = 274.295013, z = -3179.811279},
  {name = "shady33", x = -3448.477051, y = 200.841858, z = -3405.759277},
  {name = "shady34", x = -3456.994385, y = 202.799271, z = -3331.433105},
  {name = "shady35", x = -3587.832520, y = 217.471802, z = -3303.008545},
  {name = "shady36", x = -3768.488525, y = 200.189224, z = -3485.245361},
  {name = "shady37", x = -3933.306885, y = 225.878189, z = -3289.051025},
  {name = "shady38", x = -3912.153076, y = 273.445709, z = -3180.873779},
  {name = "shady39", x = -4014.449219, y = 201.694275, z = -3120.903320},
  {name = "shady40", x = -3930.873291, y = 261.357666, z = -3001.662354},
  {name = "shady41", x = -3933.597168, y = 213.491318, z = -2908.342041},
  {name = "shady42", x = -2611.115234, y = 229.523407, z = -4277.253906},
  {name = "shady43", x = -3932.687988, y = 225.986969, z = -3289.249268},
  {name = "shady44", x = -3791.638428, y = 206.414307, z = -2759.415039},
  {name = "shady45", x = -3674.127686, y = 272.090820, z = -3002.917480},
  {name = "shady46", x = -3631.432861, y = 280.851837, z = -3070.293701},
  {name = "shady47", x = -3785.850830, y = 258.429260, z = -3094.548096},
  {name = "shady48", x = -3772.501221, y = 201.102951, z = -3133.043457},
  {name = "shady49", x = -3712.636475, y = 201.436111, z = -3139.145264},
  {name = "shady50", x = -3715.136475, y = 274.444611, z = -3123.261963},
  {name = "shady51", x = -3783.189453, y = 268.611847, z = -3197.590576},
  {name = "shady52", x = -3491.588867, y = 224.838806, z = -3087.775635},
  {name = "shady53", x = -3427.412598, y = 200.532181, z = -2940.265869},
  {name = "shady54", x = -4012.327393, y = 201.881729, z = -3121.228271},
  {name = "shady55", x = -2788.606934, y = 206.117020, z = -4205.358887},
  {name = "shady56", x = -3564.438721, y = 214.166061, z = -2002.835693},
  {name = "shady57", x = -3823.414551, y = 282.469330, z = -2437.315186},
  {name = "shady58", x = -4004.414062, y = 248.393509, z = -2438.709961},
  {name = "shady59", x = -4102.350586, y = 222.026245, z = -2437.988770},
  {name = "shady60", x = -3872.853760, y = 315.073975, z = -2348.696289},
  {name = "shady61", x = -3553.447754, y = 176.942383, z = -1178.509766},
  {name = "shady62", x = -3919.576904, y = 202.245132, z = -1160.165405},
  {name = "shady63", x = -3727.285889, y = 202.292084, z = -1004.981689},
  {name = "shady64", x = -3575.564453, y = 208.808212, z = -905.860962},
  {name = "shady65", x = -3933.153809, y = 213.669846, z = -2908.001465},
  {name = "shady66", x = -3562.713623, y = 201.624390, z = -800.701660},
  {name = "shady67", x = -2698.383301, y = 231.111710, z = -4442.866211},
  {name = "shady68", x = -3416.153564, y = 204.459778, z = -633.302307},
  {name = "shady69", x = -3624.119141, y = 134.534256, z = -649.491577},
  {name = "shady70", x = -3753.385010, y = 171.414215, z = -721.455200},
  {name = "shady71", x = -3882.558105, y = 255.446762, z = -499.718170},
  {name = "shady72", x = -4043.823975, y = 199.620300, z = -371.389343},
  {name = "shady73", x = -4204.305176, y = 199.674042, z = -864.687622},
  {name = "shady74", x = -3938.260254, y = 200.691772, z = -677.436829},
  {name = "shady75", x = -3986.904053, y = 171.180161, z = -765.701477},
  {name = "shady76", x = -3928.407959, y = 261.051666, z = -3002.354736},
  {name = "shady77", x = -4027.662842, y = 208.644943, z = -903.570374},
  {name = "shady78", x = -3902.636475, y = 121.053284, z = -903.978027},
  {name = "shady79", x = -2575.045166, y = 320.737518, z = -4543.366211},
  {name = "shady80", x = -3895.701416, y = 123.196121, z = -968.216003},
  {name = "shady81", x = -4260.902344, y = 201.121338, z = -3627.987793},
  {name = "shady82", x = -4521.531738, y = 204.649979, z = -3743.836670},
  {name = "shady83", x = -4627.958496, y = 204.324173, z = -3793.545410},
  {name = "shady84", x = -4398.011230, y = 238.217560, z = -3864.258545},
  {name = "shady85", x = -4275.011719, y = 198.927124, z = -4274.576660},
  {name = "shady86", x = -4273.907715, y = 212.380341, z = -4251.526855},
  {name = "shady87", x = -3716.371338, y = 274.936157, z = -3124.147217},
  {name = "shady88", x = -4492.049805, y = 201.308105, z = -4417.518066},
  {name = "shady89", x = -4951.502441, y = 201.627167, z = -4600.572754},
  {name = "shady90", x = -4638.790039, y = 202.908722, z = -4107.609375},
  {name = "shady91", x = -2805.083496, y = 200.850998, z = -4695.344727},
  {name = "shady92", x = -4926.744141, y = 203.637711, z = -3803.971924},
  {name = "shady93", x = -6124.641113, y = 202.219940, z = -3314.105713},
  {name = "shady94", x = -4006.040771, y = 218.555695, z = -2131.612305},
  {name = "shady95", x = -3011.319580, y = 209.253372, z = -3935.684326},
  {name = "shady96", x = -3280.897705, y = 200.856934, z = -3648.573975},
  {name = "shady97", x = -2947.036377, y = 200.956573, z = -3312.354248},
  {name = "shady98", x = -3786.906982, y = 258.928894, z = -3092.051025},
  {name = "shady99", x = -6126.093750, y = 202.494812, z = -3313.925293},
  {name = "shady100", x = -6342.413086, y = 245.052994, z = -2820.629883},
  {name = "shady101", x = -6231.077148, y = 217.526169, z = -2837.941650},
  {name = "shady102", x = -6411.984863, y = 251.100876, z = -2509.596191},
  {name = "shady103", x = -6385.133789, y = 275.102417, z = -2683.740234},
  {name = "shady104", x = -6303.720215, y = 253.956192, z = -2560.639648},
  {name = "shady105", x = -6348.228516, y = 263.648041, z = -2463.517334},
  {name = "shady106", x = -6115.242188, y = 221.995499, z = -2465.013916},
  {name = "shady107", x = -6006.960449, y = 204.392258, z = -2625.215576},
  {name = "shady108", x = -5861.931641, y = 201.258148, z = -2728.869141},
}
local function read_idx()
  local f = io.open(PATH, "r")
  if f then
    local s = f:read("*l")
    f:close()
    local n = tonumber(s)
    if n and n >= 1 and n <= #W then return n end
  end
  return 1
end


local function write_idx(n)
  local f = io.open(PATH, "w")
  if f then f:write(tostring(n)); f:close() end
end


local idx = read_idx()
local wp  = W[idx]


local pos = Vector3(wp.x, wp.y, wp.z)
CS.MoleMole.ActorUtils.SetAvatarPos(pos)
show(string.format("TP %d/%d: %s (X:%.2f Y:%.2f Z:%.2f) [next-> %d]",
  idx, #W, wp.name, wp.x, wp.y, wp.z, (idx % #W) + 1))

idx = idx + 1
if idx > #W then idx = 1 end
write_idx(idx)