local PATH = "tp_idx.txt"
local Vector3 = CS.UnityEngine.Vector3

local function show(msg)
  if CS and CS.MoleMole and CS.MoleMole.ActorUtils and CS.MoleMole.ActorUtils.ShowMessage then
    CS.MoleMole.ActorUtils.ShowMessage(tostring(msg))
  else
    print(tostring(msg))
  end
end
local W = {
  {name = "shady1", x = -6331.049316, y = 234.898346, z = -2835.407471},
  {name = "shady2", x = -6049.187012, y = 204.611603, z = -3293.930176},
  {name = "shady3", x = -5787.374023, y = 211.340927, z = -2596.667969},
  {name = "shady4", x = -5978.465332, y = 235.998810, z = -2594.579346},
  {name = "shady5", x = -6007.577637, y = 184.329422, z = -2544.480225},
  {name = "shady6", x = -6281.607910, y = 224.200485, z = -2678.643799},
  {name = "shady7", x = -6004.447754, y = 164.983017, z = -2760.998779},
  {name = "shady8", x = -6418.222168, y = 237.773254, z = -2817.997314},
  {name = "shady9", x = -6276.080566, y = 230.780960, z = -2860.034668},
  {name = "shady10", x = -6716.013672, y = 215.891281, z = -2637.875977},
  {name = "shady11", x = -6720.241699, y = 212.558792, z = -2679.563477},
  {name = "shady12", x = -6423.781250, y = 219.728210, z = -2808.007568},
  {name = "shady13", x = -6138.698242, y = 203.062973, z = -2768.387451},
  {name = "shady14", x = -6176.344727, y = 216.319885, z = -2793.251953},
  {name = "shady15", x = -6067.368164, y = 210.080765, z = -2856.154297},
  {name = "shady16", x = -6043.867188, y = 208.166656, z = -2845.006104},
  {name = "shady17", x = -6379.292969, y = 254.861130, z = -2572.761475},
  {name = "shady18", x = -6463.539062, y = 201.626266, z = -2415.468506},
  {name = "shady19", x = -5888.241699, y = 202.682220, z = -2508.699463},
  {name = "shady20", x = -6115.193848, y = 201.657806, z = -3193.681152},
  {name = "shady21", x = -6208.343262, y = 202.947083, z = -3076.512207},
  {name = "shady22", x = -6062.049805, y = 219.741318, z = -2883.676758},
  {name = "shady23", x = -6299.845215, y = 252.910065, z = -2464.872803},
  {name = "shady24", x = -6229.802734, y = 243.954880, z = -2536.679932},
  {name = "shady25", x = -5792.370117, y = 211.413620, z = -2572.234375},
  {name = "shady26", x = -5803.670898, y = 210.581055, z = -2583.566895},
  {name = "shady27", x = -5792.018066, y = 211.375702, z = -2571.983887},
  {name = "shady28", x = -6264.616699, y = 321.803192, z = -2675.125244},
  {name = "shady29", x = -5951.266602, y = 197.305008, z = -2579.676758},
  {name = "shady30", x = -5969.041992, y = 196.412842, z = -2595.194336},
  {name = "shady31", x = -5985.174316, y = 187.894226, z = -2590.909668},
  {name = "shady32", x = -5997.587402, y = 190.442215, z = -2582.175293},
  {name = "shady33", x = -6783.481445, y = 201.405472, z = -2699.236816},
  {name = "shady34", x = -6235.567383, y = 236.972000, z = -2941.729980},
  {name = "shady35", x = -6319.959961, y = 298.364197, z = -2733.208008},
  {name = "shady36", x = -5969.067383, y = 196.332352, z = -2594.849365},
  {name = "shady37", x = -5985.458496, y = 188.414688, z = -2591.920410},
  {name = "shady38", x = -5998.375488, y = 191.192734, z = -2581.944336},
  {name = "shady39", x = -5951.626465, y = 197.315353, z = -2579.060059},
  {name = "shady40", x = -6251.789551, y = 263.413940, z = -2930.314941},
  {name = "shady41", x = -6276.359863, y = 230.656570, z = -2859.067871},
  {name = "shady42", x = -6720.006836, y = 217.453110, z = -2632.156250},
  {name = "shady43", x = -6248.808594, y = 218.263794, z = -2800.768799},
  {name = "shady44", x = -6070.856445, y = 211.611145, z = -2844.466797},
  {name = "shady45", x = -6140.535156, y = 202.478271, z = -2718.361572},
  {name = "shady46", x = -6393.111328, y = 263.779877, z = -2651.670654},
  {name = "shady47", x = -6017.055664, y = 201.392181, z = -2445.870117},
  {name = "shady48", x = -6787.166016, y = 201.473083, z = -2672.674561},
  {name = "shady49", x = -3948.705566, y = 201.876602, z = -3307.834717},
  {name = "shady50", x = -2687.099365, y = 208.185822, z = -4167.694824},
  {name = "shady51", x = -6119.890625, y = 200.960785, z = -3187.809082},
  {name = "shady52", x = -3195.799561, y = 201.104355, z = -3584.987549},
  {name = "shady53", x = -5792.322266, y = 211.256317, z = -2574.771240},
  {name = "shady54", x = -3912.435791, y = 205.093033, z = -1055.298950},
  {name = "shady55", x = -5803.425293, y = 210.571075, z = -2580.670410},
  {name = "shady56", x = -6217.022949, y = 253.950455, z = -2542.653076},
  {name = "shady57", x = -6262.873047, y = 322.945282, z = -2669.711182},
  {name = "shady58", x = -3913.518555, y = 205.088211, z = -1052.467651},
  {name = "shady59", x = -4846.233398, y = 201.479568, z = -4110.958008},
  {name = "shady60", x = -3779.386719, y = 200.847076, z = -1236.752075},
  {name = "shady61", x = -5963.333496, y = 203.481339, z = -2645.048340},
  {name = "shady62", x = -3513.550293, y = 201.528122, z = -2904.768555},
  {name = "shady63", x = -4854.955078, y = 206.046265, z = -4192.030762},
  {name = "shady64", x = -4359.687500, y = 204.578232, z = -3964.136230},
  {name = "shady65", x = -3807.710205, y = 251.680511, z = -544.507690},
  {name = "shady66", x = -6063.437500, y = 219.570572, z = -2886.468750},
  {name = "shady67", x = -2594.080566, y = 255.154953, z = -4352.983398},
  {name = "shady68", x = -3462.755615, y = 200.963638, z = -1973.859863},
  {name = "shady69", x = -2823.214111, y = 212.057159, z = -4211.540039},
  {name = "shady70", x = -6302.567383, y = 258.255157, z = -2471.054443},
  {name = "shady71", x = -4050.085693, y = 213.349045, z = -815.370789},
  {name = "shady72", x = -3837.910889, y = 125.873932, z = -631.885620},
  {name = "shady73", x = -2538.087402, y = 231.796432, z = -4185.387695},
  {name = "shady74", x = -3360.854736, y = 200.771271, z = -2973.554932},
  {name = "shady75", x = -2666.248535, y = 209.510254, z = -4091.919678},
  {name = "shady76", x = -2383.826904, y = 225.931808, z = -4506.127441},
  {name = "shady77", x = -6318.851562, y = 300.483917, z = -2732.833740},
  {name = "shady78", x = -4620.162109, y = 200.917053, z = -3997.612793},
  {name = "shady79", x = -3786.323486, y = 202.046722, z = -1030.699707},
  {name = "shady80", x = -4275.303711, y = 210.017090, z = -4308.457520},
  {name = "shady81", x = -2331.060303, y = 226.219528, z = -4237.758301},
  {name = "shady82", x = -3677.918701, y = 173.091522, z = -947.405640},
  {name = "shady83", x = -3819.925293, y = 108.485886, z = -898.265869},
  {name = "shady84", x = -5998.663086, y = 186.291382, z = -2543.491211},
  {name = "shady85", x = -3002.395020, y = 203.738327, z = -4489.893555},
  {name = "shady86", x = -2387.570312, y = 252.673233, z = -4415.601074},
  {name = "shady87", x = -4547.878906, y = 201.127563, z = -3861.707275},
  {name = "shady88", x = -2344.998291, y = 206.007065, z = -4230.388184},
  {name = "shady89", x = -2300.495117, y = 200.973160, z = -4150.819336},
  {name = "shady90", x = -4254.629395, y = 218.657104, z = -4149.029297},
  {name = "shady91", x = -3748.575195, y = 201.956009, z = -3282.517578},
  {name = "shady92", x = -2725.255127, y = 257.812286, z = -4391.621582},
  {name = "shady93", x = -3209.663574, y = 220.682114, z = -3433.493408},
  {name = "shady94", x = -3905.552246, y = 205.043747, z = -1053.917725},
  {name = "shady95", x = -2170.937988, y = 163.043732, z = -4486.592285},
  {name = "shady96", x = -3895.464111, y = 201.519653, z = -2281.781250},
  {name = "shady97", x = -3981.279053, y = 202.604172, z = -2279.793945},
  {name = "shady98", x = -2347.072266, y = 205.752930, z = -4221.285156},
  {name = "shady99", x = -2293.637207, y = 207.823181, z = -4284.678711},
  {name = "shady100", x = -2755.377441, y = 239.570435, z = -4418.158691},
  {name = "shady101", x = -2833.242432, y = 200.686188, z = -4458.773926},
  {name = "shady102", x = -2157.912842, y = 162.880630, z = -4508.349121},
  {name = "shady103", x = -2339.733887, y = 227.348785, z = -4261.513184},
  {name = "shady104", x = -2529.156250, y = 288.116364, z = -4523.159180},
  {name = "shady105", x = -2836.716553, y = 223.862259, z = -4593.277344},
  {name = "shady106", x = -3709.862305, y = 231.041534, z = -2516.977295},
  {name = "shady107", x = -3910.581543, y = 285.820770, z = -2299.838135},
  {name = "shady108", x = -6282.583008, y = 224.078079, z = -2679.484375},
  {name = "shady109", x = -5976.486328, y = 236.808899, z = -2596.369141},
  {name = "shady110", x = -6048.627930, y = 204.628174, z = -3294.137451},
  {name = "shady111", x = -6423.237305, y = 219.508286, z = -2807.363525},
  {name = "shady112", x = -6429.903809, y = 238.922668, z = -2810.574463},
  {name = "shady113", x = -6138.979492, y = 202.900940, z = -2768.147949},
  {name = "shady114", x = -6174.750488, y = 216.274490, z = -2793.143066},
  {name = "shady115", x = -6044.903320, y = 208.222641, z = -2844.295898},
  {name = "shady116", x = -6375.060059, y = 255.193039, z = -2574.505615},
  {name = "shady117", x = -2472.675781, y = 221.787827, z = -4112.103516},
  {name = "shady118", x = -6318.481934, y = 201.518784, z = -3182.851562},
  {name = "shady119", x = -6172.988281, y = 228.773758, z = -2543.395264},
  {name = "shady120", x = -6274.577637, y = 201.003952, z = -2382.748291},
  {name = "shady121", x = -6166.929199, y = 200.343079, z = -3054.528076},
  {name = "shady122", x = -6120.678711, y = 201.311035, z = -2981.841309},
  {name = "shady123", x = -6172.949219, y = 209.033279, z = -2984.079834},
  {name = "shady124", x = -6237.722168, y = 200.820221, z = -3015.635742},
  {name = "shady125", x = -6360.845215, y = 209.371750, z = -2703.007568},
  {name = "shady126", x = -6237.479004, y = 209.887741, z = -3218.257080},
  {name = "shady127", x = -6191.314453, y = 204.571075, z = -2721.827637},
  {name = "shady128", x = -6361.647949, y = 206.338287, z = -2378.859131},
  {name = "shady129", x = -6464.365723, y = 201.671082, z = -2416.568848},
  {name = "shady130", x = -5886.895020, y = 202.595459, z = -2509.803711},
}
local function read_idx()
  local f = io.open(PATH, "r")
  if f then
    local s = f:read("*l")
    f:close()
    local n = tonumber(s)
    if n and n >= 1 and n <= #W then return n end
  end
  return 1
end


local function write_idx(n)
  local f = io.open(PATH, "w")
  if f then f:write(tostring(n)); f:close() end
end


local idx = read_idx()
local wp  = W[idx]


local pos = Vector3(wp.x, wp.y, wp.z)
CS.MoleMole.ActorUtils.SetAvatarPos(pos)
show(string.format("TP %d/%d: %s (X:%.2f Y:%.2f Z:%.2f) [next-> %d]",
  idx, #W, wp.name, wp.x, wp.y, wp.z, (idx % #W) + 1))

idx = idx + 1
if idx > #W then idx = 1 end
write_idx(idx)