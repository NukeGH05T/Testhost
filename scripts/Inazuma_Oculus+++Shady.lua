
local PATH = "tp_idx.txt"

local Vector3 = CS.UnityEngine.Vector3

local function show(msg)
  if CS and CS.MoleMole and CS.MoleMole.ActorUtils and CS.MoleMole.ActorUtils.ShowMessage then
    CS.MoleMole.ActorUtils.ShowMessage(tostring(msg))
  else
    print(tostring(msg))
  end
end

local W = {
  {name="WP 1", x=-2477.5771, y=218.6991, z=-4624.7861},
  {name="WP 2", x=-3541.9988, y=217.1210, z=-541.8069},
  {name="WP 3", x=-3478.4194, y=220.9121, z=-831.0790},
  {name="WP 4", x=-3589.4128, y=217.8913, z=-858.8392},
  {name="WP 5", x=-3595.3889, y=181.5635, z=-961.4350},
  {name="WP 6", x=-3541.2388, y=197.8045, z=-1152.1122},
  {name="WP 7", x=-3792.7063, y=201.1021, z=-674.1267},
  {name="WP 8", x=-3690.6106, y=140.6889, z=-690.9584},
  {name="WP 9", x=-3656.9910, y=148.7731, z=-803.3290},
  {name="WP 10", x=-3693.5364, y=124.5307, z=-902.8234},
  {name="WP 11", x=-3829.3225, y=139.2173, z=-745.0466},
  {name="WP 12", x=-2326.5818, y=238.4337, z=-4256.9834},
  {name="WP 13", x=-3892.6011, y=110.3409, z=-737.7440},
  {name="WP 14", x=-3985.5574, y=162.4798, z=-821.3508},
  {name="WP 15", x=-4060.5415, y=207.0641, z=-815.7131},
  {name="WP 16", x=-4061.7874, y=238.0848, z=-873.1852},
  {name="WP 17", x=-4144.0405, y=208.4858, z=-1023.5762},
  {name="WP 18", x=-3990.7820, y=188.2833, z=-932.8390},
  {name="WP 19", x=-3904.0212, y=133.8853, z=-985.4840},
  {name="WP 20", x=-3810.6475, y=169.6256, z=-1066.9607},
  {name="WP 21", x=-3804.3555, y=139.4595, z=-1032.1953},
  {name="WP 22", x=-4188.1733, y=226.8463, z=-3584.0154},
  {name="WP 23", x=-2183.3313, y=218.8496, z=-4261.3125},
  {name="WP 24", x=-4438.9521, y=208.8405, z=-3968.2056},
  {name="WP 25", x=-4494.4277, y=220.9350, z=-3925.4834},
  {name="WP 26", x=-4434.9180, y=346.1543, z=-3819.5073},
  {name="WP 27", x=-4433.2744, y=235.4468, z=-3740.0627},
  {name="WP 28", x=-4433.5044, y=200.0328, z=-3765.2129},
  {name="WP 29", x=-4438.2622, y=198.0902, z=-3719.3760},
  {name="WP 30", x=-4357.0259, y=229.4935, z=-4019.4446},
  {name="WP 31", x=-4359.0728, y=282.4623, z=-4056.5476},
  {name="WP 32", x=-4672.9761, y=216.0728, z=-3727.0793},
  {name="WP 33", x=-4739.9600, y=234.6238, z=-3708.6902},
  {name="WP 34", x=-2350.3840, y=196.6202, z=-4251.4526},
  {name="WP 35", x=-4738.3403, y=204.9854, z=-3766.0010},
  {name="WP 36", x=-4360.2441, y=297.0490, z=-4230.2588},
  {name="WP 37", x=-4350.9707, y=207.7568, z=-4265.2427},
  {name="WP 38", x=-4298.8936, y=210.2873, z=-4223.7544},
  {name="WP 39", x=-4311.1470, y=244.4443, z=-4161.5498},
  {name="WP 40", x=-4258.2314, y=203.6550, z=-4475.4141},
  {name="WP 41", x=-4408.1660, y=206.0488, z=-4556.5020},
  {name="WP 42", x=-4481.8481, y=217.4739, z=-4641.2988},
  {name="WP 43", x=-4545.6587, y=243.9178, z=-4507.2886},
  {name="WP 44", x=-4457.9155, y=204.0627, z=-4346.9648},
  {name="WP 45", x=-2436.6624, y=259.2283, z=-4288.2407},
  {name="WP 46", x=-4814.4878, y=266.7026, z=-4656.4141},
  {name="WP 47", x=-4867.5620, y=207.7495, z=-4776.3838},
  {name="WP 48", x=-4939.0322, y=306.2767, z=-4245.1191},
  {name="WP 49", x=-4906.1172, y=211.4405, z=-3890.2488},
  {name="WP 50", x=-4574.0542, y=377.1390, z=-4226.1978},
  {name="WP 51", x=-4570.0337, y=336.7833, z=-4306.8940},
  {name="WP 52", x=-4682.7905, y=558.4603, z=-4159.6519},
  {name="WP 53", x=-4697.1992, y=211.6956, z=-4106.3208},
  {name="WP 54", x=-4781.3735, y=510.6100, z=-4268.3857},
  {name="WP 55", x=-4809.3989, y=248.1800, z=-4394.4897},
  {name="WP 56", x=-2376.6987, y=231.4934, z=-4356.1929},
  {name="WP 57", x=-4665.2358, y=447.9842, z=-4228.2964},
  {name="WP 58", x=-4658.4053, y=194.7993, z=-4248.0620},
  {name="WP 59", x=-4644.5767, y=173.8909, z=-4243.6611},
  {name="WP 60", x=-4677.2261, y=161.0296, z=-4248.8750},
  {name="WP 61", x=-6678.3042, y=207.6582, z=-2618.2197},
  {name="WP 62", x=-6483.2612, y=222.1369, z=-2448.4968},
  {name="WP 63", x=-6377.4829, y=205.8519, z=-2437.7493},
  {name="WP 64", x=-6344.4399, y=281.8568, z=-2464.9512},
  {name="WP 65", x=-6284.2983, y=209.5384, z=-2454.7554},
  {name="WP 66", x=-6195.2856, y=223.9957, z=-2367.0732},
  {name="WP 67", x=-2485.8872, y=462.8956, z=-4391.0664},
  {name="WP 68", x=-6331.9854, y=269.9988, z=-2594.2415},
  {name="WP 69", x=-6401.0151, y=256.6658, z=-2622.5166},
  {name="WP 70", x=-6341.2344, y=381.6877, z=-2677.6089},
  {name="WP 71", x=-6292.3091, y=257.7406, z=-2715.3525},
  {name="WP 72", x=-6219.3140, y=259.0460, z=-2707.7656},
  {name="WP 73", x=-6187.7993, y=213.0530, z=-2727.4507},
  {name="WP 74", x=-6152.1123, y=222.5379, z=-2816.5925},
  {name="WP 75", x=-6224.9243, y=209.8056, z=-2776.6594},
  {name="WP 76", x=-6296.5786, y=250.8102, z=-2787.1946},
  {name="WP 77", x=-6370.4736, y=260.7408, z=-2771.1885},
  {name="WP 78", x=-2474.5361, y=377.4554, z=-4377.5034},
  {name="WP 79", x=-6410.9546, y=220.1474, z=-2808.1003},
  {name="WP 80", x=-6378.0112, y=204.3923, z=-2918.4102},
  {name="WP 81", x=-6237.1094, y=272.1770, z=-2936.2476},
  {name="WP 82", x=-6005.7485, y=215.6684, z=-3275.8369},
  {name="WP 83", x=-6016.8359, y=233.7167, z=-2913.6025},
  {name="WP 84", x=-6011.4331, y=170.4691, z=-2824.0674},
  {name="WP 85", x=-5964.5903, y=299.6078, z=-2581.4553},
  {name="WP 86", x=-5975.2466, y=194.1316, z=-2564.4192},
  {name="WP 87", x=-5927.0225, y=155.3306, z=-2710.7151},
  {name="WP 88", x=-5959.6670, y=209.1635, z=-2613.8894},
  {name="WP 89", x=-2450.5537, y=256.3423, z=-4473.1475},
  {name="WP 90", x=-5791.7114, y=205.0779, z=-2625.7495},
  {name="WP 91", x=-5870.1528, y=249.0918, z=-2463.8547},
  {name="WP 92", x=-5890.6558, y=170.8440, z=-2691.9358},
  {name="WP 93", x=-4952.5361, y=212.8197, z=-2524.0862},
  {name="WP 94", x=-2512.3855, y=311.0184, z=-4507.4214},
  {name="WP 95", x=-2538.6067, y=246.3643, z=-4395.2026},
  {name="WP 96", x=-2575.0061, y=423.6642, z=-4451.4521},
  {name="WP 97", x=-2646.2075, y=260.4858, z=-4471.2725},
  {name="WP 98", x=-2561.0493, y=243.0974, z=-4346.6318},
  {name="WP 99", x=-2627.5247, y=252.1307, z=-4361.4824},
  {name="WP 100", x=-2715.1904, y=216.5791, z=-4347.3667},
  {name="WP 101", x=-2758.9102, y=234.2170, z=-4462.9634},
  {name="WP 102", x=-2908.5007, y=282.5157, z=-4415.8667},
  {name="WP 103", x=-2470.0054, y=235.9729, z=-4099.6890},
  {name="WP 104", x=-2493.6375, y=214.3518, z=-4167.3975},
  {name="WP 105", x=-2507.7429, y=260.2566, z=-3890.7786},
  {name="WP 106", x=-2542.6331, y=273.5019, z=-4261.7734},
  {name="WP 107", x=-2636.0261, y=212.5653, z=-3993.7358},
  {name="WP 108", x=-2716.3188, y=238.1368, z=-3981.5044},
  {name="WP 109", x=-2825.2625, y=198.3770, z=-4084.9810},
  {name="WP 110", x=-2775.0818, y=221.2133, z=-4143.9297},
  {name="WP 111", x=-2829.3799, y=177.3468, z=-4065.8655},
  {name="WP 112", x=-2932.7322, y=220.3472, z=-4171.7295},
  {name="WP 113", x=-3379.2031, y=380.6744, z=-4581.8574},
  {name="WP 114", x=-3348.7136, y=214.3252, z=-4609.6206},
  {name="WP 115", x=-3021.3418, y=234.1089, z=-4042.2024},
  {name="WP 116", x=-2151.2446, y=232.5143, z=-3467.5559},
  {name="WP 117", x=-3376.3230, y=195.9100, z=-4218.1338},
  {name="WP 118", x=-3251.8196, y=201.7388, z=-3933.7998},
  {name="WP 119", x=-3611.8320, y=236.4407, z=-3198.1423},
  {name="WP 120", x=-3206.1021, y=234.4414, z=-3489.9077},
  {name="WP 121", x=-3373.1733, y=238.0997, z=-3704.9250},
  {name="WP 122", x=-3588.5474, y=210.5002, z=-3638.2690},
  {name="WP 123", x=-2992.3655, y=204.6335, z=-3210.1765},
  {name="WP 124", x=-3272.8066, y=200.6018, z=-3277.2319},
  {name="WP 125", x=-3360.2009, y=199.9086, z=-3138.8945},
  {name="WP 126", x=-3456.3989, y=212.5613, z=-3043.5449},
  {name="WP 127", x=-2101.6841, y=165.9483, z=-4505.2661},
  {name="WP 128", x=-3415.3086, y=214.1303, z=-2978.9092},
  {name="WP 129", x=-3630.2764, y=234.9122, z=-3254.9036},
  {name="WP 130", x=-3341.3411, y=204.4907, z=-3462.7332},
  {name="WP 131", x=-3662.2649, y=212.3061, z=-2992.2969},
  {name="WP 132", x=-3606.3242, y=270.7681, z=-3160.6909},
  {name="WP 133", x=-3673.6306, y=272.8401, z=-3060.9995},
  {name="WP 134", x=-3744.7607, y=243.3649, z=-2975.6077},
  {name="WP 135", x=-3802.8955, y=287.4747, z=-3005.5747},
  {name="WP 136", x=-3876.9658, y=251.7017, z=-2998.0193},
  {name="WP 137", x=-3877.7581, y=228.5841, z=-3039.0442},
  {name="WP 138", x=-2093.5798, y=228.5214, z=-4637.5635},
  {name="WP 139", x=-3858.4705, y=297.0693, z=-3120.5740},
  {name="WP 140", x=-3782.4253, y=279.2990, z=-3055.2922},
  {name="WP 141", x=-3784.8511, y=210.6188, z=-3071.7576},
  {name="WP 142", x=-3863.6875, y=226.2448, z=-3231.6077},
  {name="WP 143", x=-3805.3696, y=274.7977, z=-3219.9524},
  {name="WP 144", x=-3712.3931, y=298.0159, z=-3138.1406},
  {name="WP 145", x=-3693.7622, y=259.1552, z=-3125.0234},
  {name="WP 146", x=-3706.1084, y=266.0565, z=-3163.2893},
  {name="WP 147", x=-3636.0742, y=207.1177, z=-2809.3398},
  {name="WP 148", x=-3540.3530, y=213.5431, z=-2780.2666},
  {name="WP 149", x=-2199.0168, y=212.3852, z=-4934.1982},
  {name="WP 150", x=-3484.6006, y=246.1064, z=-2639.2576},
  {name="WP 151", x=-3638.9463, y=213.9697, z=-2439.1404},
  {name="WP 152", x=-3755.8784, y=279.9053, z=-2557.0959},
  {name="WP 153", x=-3786.9688, y=263.0269, z=-2439.7244},
  {name="WP 154", x=-3808.0896, y=279.5473, z=-2382.1833},
  {name="WP 155", x=-3735.8174, y=297.6063, z=-2329.7993},
  {name="WP 156", x=-3871.9885, y=268.5383, z=-2459.7361},
  {name="WP 157", x=-3949.2729, y=199.9247, z=-2417.4839},
  {name="WP 158", x=-3970.6553, y=398.3681, z=-2444.6631},
  {name="WP 159", x=-4021.4092, y=253.7140, z=-2426.6646},
  {name="WP 160", x=-2347.2439, y=194.5304, z=-4794.1494},
  {name="WP 161", x=-4079.4192, y=229.8690, z=-2396.0146},
  {name="WP 162", x=-4078.1489, y=202.9330, z=-2457.0151},
  {name="WP 163", x=-4132.0195, y=252.6051, z=-2349.6802},
  {name="WP 164", x=-4346.4663, y=202.3876, z=-2515.2437},
  {name="WP 165", x=-4130.1831, y=261.0492, z=-2243.2703},
  {name="WP 166", x=-4024.6047, y=239.9207, z=-2277.0767},
  {name="WP 167", x=-3974.9529, y=249.9984, z=-2178.1914},
  {name="WP 168", x=-4027.5491, y=234.3375, z=-2101.5579},
  {name="WP 169", x=-3858.7126, y=202.4324, z=-2028.0381},
  {name="WP 170", x=-3891.5835, y=260.1328, z=-2276.7161},
  {name="WP 171", x=-2561.3215, y=242.9890, z=-4632.7202},
  {name="WP 172", x=-3795.5344, y=246.2951, z=-2194.2871},
  {name="WP 173", x=-3759.8269, y=231.7660, z=-2088.7766},
  {name="WP 174", x=-3620.7595, y=288.4443, z=-2181.9834},
  {name="WP 175", x=-3524.2380, y=225.6549, z=-2176.6572},
  {name="WP 176", x=-3611.7485, y=228.9753, z=-2000.3665},
  {name="WP 177", x=-3505.8406, y=204.4089, z=-1972.0532},
  {name="WP 178", x=-3822.7893, y=212.0575, z=-1801.5411},
  {name="WP 179", x=-3728.3413, y=249.1723, z=-1604.3413},
  {name="WP 180", x=-3872.3650, y=222.8554, z=-478.7219},
  {name="WP 181", x=-3749.4531, y=193.2659, z=-582.7649},
}

-- читаем индекс
local function read_idx()
  local f = io.open(PATH, "r")
  if f then
    local s = f:read("*l")
    f:close()
    local n = tonumber(s)
    if n and n >= 1 and n <= #W then return n end
  end
  return 1
end

-- пишем индекс
local function write_idx(n)
  local f = io.open(PATH, "w")
  if f then f:write(tostring(n)); f:close() end
end


local idx = read_idx()
local wp  = W[idx]

-- телепорт
local pos = Vector3(wp.x, wp.y, wp.z)
CS.MoleMole.ActorUtils.SetAvatarPos(pos)
show(string.format("TP %d/%d: %s (X:%.2f Y:%.2f Z:%.2f) [next-> %d]",
  idx, #W, wp.name, wp.x, wp.y, wp.z, (idx % #W) + 1))

idx = idx + 1
if idx > #W then idx = 1 end
write_idx(idx)
