-- STEP TELEPORT (файловый счётчик) — 1 клик = следующий поинт

-- === ФАЙЛ СЧЁТЧИКА (в той же папке, что и lua) ===
local PATH = "tp_idx.txt"

-- Полезные алиасы
local Vector3 = CS.UnityEngine.Vector3

local function show(msg)
  if CS and CS.MoleMole and CS.MoleMole.ActorUtils and CS.MoleMole.ActorUtils.ShowMessage then
    CS.MoleMole.ActorUtils.ShowMessage(tostring(msg))
  else
    print(tostring(msg))
  end
end

-- === СПИСОК ВАЙПОИНТОВ (Auto Chest — Mondstadt, 360 шт) ===
local W = {
  {name="Сундук 1", x=2879.242920, y=277.601013, z=-1547.663940},
  {name="Сундук 2", x=1727.812988, y=262.562012, z=-1232.217041},
  {name="Сундук 3", x=1469.253052, y=279.476990, z=-1381.573975},
  {name="Сундук 4", x=1618.318970, y=287.303009, z=-1247.525024},
  {name="Сундук 5", x=1662.331055, y=237.326996, z=-1172.876953},
  {name="Сундук 6", x=1442.890015, y=287.006012, z=-1863.459961},
  {name="Сундук 7", x=1430.323975, y=265.112000, z=-1694.812988},
  {name="Сундук 8", x=1603.301025, y=347.109009, z=-2100.194092},
  {name="Сундук 9", x=1751.209961, y=251.962006, z=-1155.786987},
  {name="Сундук 10", x=1161.812988, y=306.139008, z=-1395.008057},
  {name="Сундук 11", x=2694.197998, y=238.483994, z=233.238998},
  {name="Сундук 12", x=2375.233887, y=290.618988, z=-194.121002},
  {name="Сундук 13", x=2686.146973, y=245.190994, z=-1301.840942},
  {name="Сундук 14", x=1566.688965, y=245.964996, z=-1559.956055},
  {name="Сундук 15", x=2166.727051, y=240.315994, z=-1534.983032},
  {name="Сундук 16", x=2541.852051, y=249.798996, z=-1551.704956},
  {name="Сундук 17", x=2082.051025, y=212.613007, z=-1078.271973},
  {name="Сундук 18", x=2330.129883, y=277.303009, z=-1667.618042},
  {name="Сундук 19", x=1588.071045, y=234.554001, z=-177.001999},
  {name="Сундук 20", x=2282.030029, y=274.342987, z=-1689.634033},
  {name="Сундук 21", x=2148.542969, y=234.824005, z=-1577.474976},
  {name="Сундук 22", x=2518.487061, y=268.247986, z=-1458.692017},
  {name="Сундук 23", x=2135.678955, y=217.337006, z=-1262.438965},
  {name="Сундук 24", x=1152.302979, y=298.516998, z=-1570.114990},
  {name="Сундук 25", x=2103.941895, y=214.326996, z=-1362.426025},
  {name="Сундук 26", x=2073.572998, y=225.595993, z=-1415.631958},
  {name="Сундук 27", x=2659.736084, y=250.886993, z=-1471.192993},
  {name="Сундук 28", x=2621.845947, y=224.218002, z=-1356.677979},
  {name="Сундук 29", x=2258.843994, y=240.541000, z=-1329.401001},
  {name="Сундук 30", x=1718.756958, y=301.181000, z=-928.489014},
  {name="Сундук 31", x=2381.076904, y=283.493011, z=-1795.409058},
  {name="Сундук 32", x=2825.886963, y=271.916992, z=-1440.875000},
  {name="Сундук 33", x=2452.655029, y=271.440002, z=-1526.560059},
  {name="Сундук 34", x=1720.344971, y=273.700012, z=-891.843018},
  {name="Сундук 35", x=2372.779053, y=273.384003, z=-1517.823975},
  {name="Сундук 36", x=2069.815918, y=224.664993, z=-1592.364990},
  {name="Сундук 37", x=2392.045898, y=250.550995, z=-1278.701050},
  {name="Сундук 38", x=2160.760986, y=256.393005, z=-1720.369019},
  {name="Сундук 39", x=1935.918945, y=224.671005, z=-560.164978},
  {name="Сундук 40", x=2291.215088, y=284.946014, z=-1744.793945},
  {name="Сундук 41", x=2373.006104, y=297.773010, z=-1666.738037},
  {name="Сундук 42", x=2123.305908, y=233.156998, z=-1563.927979},
  {name="Сундук 43", x=2648.724121, y=268.378998, z=-1567.019043},
  {name="Сундук 44", x=2595.815918, y=225.072006, z=-1165.249023},
  {name="Сундук 45", x=2735.396973, y=285.527008, z=-1167.753052},
  {name="Сундук 46", x=2748.683105, y=267.979004, z=-1175.790039},
  {name="Сундук 47", x=1930.765015, y=251.147995, z=-450.441010},
  {name="Сундук 48", x=2758.093994, y=274.097992, z=-1155.982056},
  {name="Сундук 49", x=2690.121094, y=262.208008, z=-1408.055054},
  {name="Сундук 50", x=1594.194946, y=277.832001, z=-702.494995},
  {name="Сундук 51", x=2791.770020, y=296.997986, z=-1565.711060},
  {name="Сундук 52", x=2840.301025, y=257.071991, z=-1665.938965},
  {name="Сундук 53", x=2859.331055, y=253.770996, z=-1745.828003},
  {name="Сундук 54", x=2825.251953, y=272.325989, z=-1488.057007},
  {name="Сундук 55", x=2709.309082, y=244.587997, z=-1155.619995},
  {name="Сундук 56", x=2322.176025, y=211.356003, z=-1121.620972},
  {name="Сундук 57", x=2883.608887, y=257.359985, z=-1838.243042},
  {name="Сундук 58", x=2569.788086, y=211.354996, z=-1248.407959},
  {name="Сундук 59", x=2842.553955, y=262.148987, z=-1872.663940},
  {name="Сундук 60", x=2225.957031, y=218.315994, z=-1524.000977},
  {name="Сундук 61", x=2823.873047, y=257.612000, z=-1404.697021},
  {name="Сундук 62", x=2669.399902, y=231.570999, z=-1131.126953},
  {name="Сундук 63", x=2870.520020, y=257.079987, z=-1428.682983},
  {name="Сундук 64", x=2876.470947, y=260.419006, z=-1444.074951},
  {name="Сундук 65", x=2683.545898, y=248.110992, z=-1321.744019},
  {name="Сундук 66", x=2815.217041, y=247.559998, z=-1141.180054},
  {name="Сундук 67", x=2849.210938, y=255.007996, z=-1797.307007},
  {name="Сундук 68", x=2963.597900, y=242.660004, z=-1629.047974},
  {name="Сундук 69", x=2927.073975, y=211.182007, z=-1579.744995},
  {name="Сундук 70", x=2133.628906, y=222.175995, z=-1185.926025},
  {name="Сундук 71", x=2912.550049, y=253.694000, z=-1622.395996},
  {name="Сундук 72", x=2678.697021, y=245.110992, z=-1292.646973},
  {name="Сундук 73", x=2723.458984, y=255.977005, z=-1214.574951},
  {name="Сундук 74", x=1802.812988, y=203.166000, z=-1268.149048},
  {name="Сундук 75", x=2634.701904, y=254.261002, z=-1689.276978},
  {name="Сундук 76", x=2696.800049, y=233.080002, z=-1110.759033},
  {name="Сундук 77", x=2378.013916, y=219.643997, z=-1092.666016},
  {name="Сундук 78", x=2346.604004, y=238.434998, z=-855.981018},
  {name="Сундук 79", x=2731.326904, y=271.725006, z=-1436.274048},
  {name="Сундук 80", x=2263.851074, y=239.899002, z=-833.768982},
  {name="Сундук 81", x=2165.885986, y=225.591995, z=-825.125977},
  {name="Сундук 82", x=2199.773926, y=210.856003, z=-917.710022},
  {name="Сундук 83", x=2089.737061, y=232.783997, z=-1530.249023},
  {name="Сундук 84", x=2186.683105, y=210.117996, z=-873.668030},
  {name="Сундук 85", x=2319.165039, y=214.091003, z=-923.517029},
  {name="Сундук 86", x=2229.212891, y=236.110001, z=-752.518982},
  {name="Сундук 87", x=2286.593018, y=236.514999, z=-876.502014},
  {name="Сундук 88", x=2644.800049, y=267.835999, z=-1573.386963},
  {name="Сундук 89", x=2131.125977, y=228.412003, z=-509.876007},
  {name="Сундук 90", x=2158.388916, y=220.768005, z=-470.813995},
  {name="Сундук 91", x=2492.347900, y=300.337006, z=-1806.621948},
  {name="Сундук 92", x=2234.520020, y=202.942001, z=-476.523010},
  {name="Сундук 93", x=2208.632080, y=220.904007, z=-477.389008},
  {name="Сундук 94", x=2728.644043, y=286.279999, z=-1573.952026},
  {name="Сундук 95", x=2111.468018, y=228.694000, z=-525.663025},
  {name="Сундук 96", x=2147.940918, y=232.873993, z=-458.984985},
  {name="Сундук 97", x=2392.706055, y=307.092987, z=-191.264999},
  {name="Сундук 98", x=2317.507080, y=307.822998, z=-202.268997},
  {name="Сундук 99", x=2363.371094, y=274.243011, z=-390.864990},
  {name="Сундук 100", x=2450.197998, y=219.636993, z=-1396.823975},
  {name="Сундук 101", x=2135.165039, y=242.626999, z=-427.687012},
  {name="Сундук 102", x=2918.508057, y=242.764999, z=-1825.732056},
  {name="Сундук 103", x=2224.721924, y=255.417999, z=-398.738007},
  {name="Сундук 104", x=2102.169922, y=228.169006, z=-493.817993},
  {name="Сундук 105", x=2341.852051, y=253.190002, z=-464.325012},
  {name="Сундук 106", x=2265.863037, y=279.093994, z=-292.088013},
  {name="Сундук 107", x=1887.121948, y=237.561996, z=-797.193970},
  {name="Сундук 108", x=2112.672119, y=228.929001, z=-1447.704956},
  {name="Сундук 109", x=2634.239014, y=274.937012, z=-414.959991},
  {name="Сундук 110", x=2220.364014, y=227.942993, z=-941.833008},
  {name="Сундук 111", x=2146.267090, y=233.572006, z=-862.296997},
  {name="Сундук 112", x=2207.951904, y=255.692001, z=-768.831970},
  {name="Сундук 113", x=2687.892090, y=263.244995, z=-1352.958984},
  {name="Сундук 114", x=2236.946045, y=258.259003, z=-775.702026},
  {name="Сундук 115", x=2320.783936, y=241.007004, z=-871.171021},
  {name="Сундук 116", x=2261.636963, y=235.990005, z=-721.312988},
  {name="Сундук 117", x=2384.583984, y=226.001999, z=-756.338989},
  {name="Сундук 118", x=2290.686035, y=225.940994, z=-950.937988},
  {name="Сундук 119", x=1842.546997, y=194.981003, z=-1378.267944},
  {name="Сундук 120", x=2380.738037, y=241.059006, z=-822.369995},
  {name="Сундук 121", x=2480.968018, y=220.220001, z=-429.885010},
  {name="Сундук 122", x=2457.310059, y=208.843994, z=136.348999},
  {name="Сундук 123", x=2711.258057, y=285.433990, z=-1397.959961},
  {name="Сундук 124", x=1258.615967, y=258.454987, z=-1412.894043},
  {name="Сундук 125", x=2062.201904, y=265.830994, z=-380.598999},
  {name="Сундук 126", x=2397.656982, y=211.304001, z=62.032001},
  {name="Сундук 127", x=2482.188965, y=205.858002, z=130.296997},
  {name="Сундук 128", x=2666.788086, y=216.115997, z=-509.687012},
  {name="Сундук 129", x=2412.558105, y=211.287994, z=28.378000},
  {name="Сундук 130", x=2414.788086, y=217.964005, z=49.168999},
  {name="Сундук 131", x=2571.645996, y=227.188004, z=15.897000},
  {name="Сундук 132", x=2447.139893, y=225.778000, z=146.759003},
  {name="Сундук 133", x=2520.291016, y=208.975006, z=404.542999},
  {name="Сундук 134", x=2457.237061, y=242.345001, z=264.332001},
  {name="Сундук 135", x=2180.100098, y=236.143997, z=-445.000000},
  {name="Сундук 136", x=2521.087891, y=229.809006, z=191.110001},
  {name="Сундук 137", x=2468.173096, y=209.548004, z=68.195999},
  {name="Сундук 138", x=2124.399902, y=211.621994, z=-559.299988},
  {name="Сундук 139", x=2472.907959, y=244.505005, z=-1411.357056},
  {name="Сундук 140", x=2608.052002, y=214.087006, z=225.550995},
  {name="Сундук 141", x=2645.680908, y=215.893005, z=445.209015},
  {name="Сундук 142", x=2580.041016, y=198.373993, z=400.529999},
  {name="Сундук 143", x=2630.250977, y=211.216003, z=463.095001},
  {name="Сундук 144", x=2651.999023, y=220.337997, z=428.493988},
  {name="Сундук 145", x=2418.201904, y=227.462006, z=-4.589000},
  {name="Сундук 146", x=2520.048096, y=208.410004, z=-22.724001},
  {name="Сундук 147", x=2643.631104, y=222.792999, z=-480.562988},
  {name="Сундук 148", x=2586.389893, y=206.949997, z=-4.721000},
  {name="Сундук 149", x=2646.110107, y=216.876007, z=-57.959000},
  {name="Сундук 150", x=1873.463989, y=196.151993, z=-1557.395996},
  {name="Сундук 151", x=2644.577881, y=222.238998, z=-85.025002},
  {name="Сундук 152", x=2493.100098, y=205.041000, z=-563.900024},
  {name="Сундук 153", x=2473.745117, y=245.733994, z=466.726990},
  {name="Сундук 154", x=2702.159912, y=253.255997, z=473.403015},
  {name="Сундук 155", x=2734.919922, y=219.001007, z=95.253998},
  {name="Сундук 156", x=2737.756104, y=248.039001, z=182.380005},
  {name="Сундук 157", x=2624.501953, y=232.085999, z=194.960999},
  {name="Сундук 158", x=2628.433105, y=251.863007, z=93.405998},
  {name="Сундук 159", x=2346.683105, y=289.916992, z=-233.313995},
  {name="Сундук 160", x=2683.736084, y=258.350006, z=100.158997},
  {name="Сундук 161", x=2533.503906, y=205.339005, z=-1130.383057},
  {name="Сундук 162", x=2690.818115, y=239.098999, z=96.844002},
  {name="Сундук 163", x=2702.835938, y=233.850998, z=173.350006},
  {name="Сундук 164", x=2677.583984, y=222.115997, z=40.207001},
  {name="Сундук 165", x=2699.281006, y=240.492996, z=26.246000},
  {name="Сундук 166", x=2606.417969, y=221.371994, z=52.393002},
  {name="Сундук 167", x=2724.270020, y=248.102997, z=184.981995},
  {name="Сундук 168", x=2793.914062, y=248.251999, z=-181.022003},
  {name="Сундук 169", x=3052.136963, y=239.712997, z=178.854004},
  {name="Сундук 170", x=2522.864990, y=208.481995, z=273.359985},
  {name="Сундук 171", x=2335.320068, y=297.730011, z=-185.317993},
  {name="Сундук 172", x=2668.470947, y=240.139999, z=-1219.859009},
  {name="Сундук 173", x=2115.471924, y=211.339996, z=-33.978001},
  {name="Сундук 174", x=2747.029053, y=258.632996, z=119.613998},
  {name="Сундук 175", x=2912.793945, y=207.828995, z=29.125000},
  {name="Сундук 176", x=2957.490967, y=207.100998, z=108.676003},
  {name="Сундук 177", x=2722.117920, y=222.518005, z=209.242996},
  {name="Сундук 178", x=2739.797119, y=261.079010, z=-1379.988037},
  {name="Сундук 179", x=2000.634033, y=205.257996, z=-1362.918945},
  {name="Сундук 180", x=2353.784912, y=284.734009, z=-278.397003},
  {name="Сундук 181", x=2111.145996, y=209.479996, z=-66.828003},
  {name="Сундук 182", x=2395.049072, y=222.544998, z=391.510986},
  {name="Сундук 183", x=2394.739014, y=222.544998, z=388.566986},
  {name="Сундук 184", x=2671.876953, y=212.404007, z=380.395996},
  {name="Сундук 185", x=2154.395996, y=210.304001, z=-13.359000},
  {name="Сундук 186", x=2844.053955, y=259.773010, z=-1347.691040},
  {name="Сундук 187", x=2055.486084, y=219.615997, z=-44.533001},
  {name="Сундук 188", x=2336.343994, y=232.906006, z=-79.750999},
  {name="Сундук 189", x=2675.709961, y=285.325012, z=-403.583008},
  {name="Сундук 190", x=2352.040039, y=248.046005, z=-87.007004},
  {name="Сундук 191", x=2379.699951, y=227.300003, z=55.000000},
  {name="Сундук 192", x=2145.991943, y=226.233002, z=29.330999},
  {name="Сундук 193", x=2556.799072, y=214.703003, z=152.901001},
  {name="Сундук 194", x=1461.566040, y=257.694000, z=-1447.291992},
  {name="Сундук 195", x=2098.864990, y=207.470001, z=-1221.021973},
  {name="Сундук 196", x=1677.212036, y=195.054993, z=-1682.160034},
  {name="Сундук 197", x=1827.239990, y=198.498993, z=-1163.572998},
  {name="Сундук 198", x=1884.208984, y=200.682007, z=-1252.840942},
  {name="Сундук 199", x=2281.721924, y=240.104996, z=-476.138000},
  {name="Сундук 200", x=1997.104980, y=219.884003, z=-1486.036987},
  {name="Сундук 201", x=1969.766968, y=220.751007, z=-1577.838989},
  {name="Сундук 202", x=1409.458008, y=300.704987, z=-1845.167969},
  {name="Сундук 203", x=1323.204956, y=303.256012, z=-1862.397949},
  {name="Сундук 204", x=1409.468994, y=304.932007, z=-1888.885986},
  {name="Сундук 205", x=1586.800049, y=258.845001, z=-1538.040039},
  {name="Сундук 206", x=1458.344971, y=242.119003, z=-1609.446045},
  {name="Сундук 207", x=2357.793945, y=283.898010, z=-1739.312988},
  {name="Сундук 208", x=1493.670044, y=269.188995, z=-1774.751953},
  {name="Сундук 209", x=2049.008057, y=202.123993, z=-1124.464966},
  {name="Сундук 210", x=1486.668945, y=330.925995, z=-1985.244019},
  {name="Сундук 211", x=2697.197998, y=247.229996, z=-427.104004},
  {name="Сундук 212", x=1461.686035, y=268.289001, z=-1627.991943},
  {name="Сундук 213", x=2766.600098, y=229.270004, z=-159.899994},
  {name="Сундук 214", x=2026.823975, y=228.964005, z=-1579.932983},
  {name="Сундук 215", x=1964.506958, y=221.979996, z=-1490.951050},
  {name="Сундук 216", x=1699.141968, y=233.151993, z=-1345.762939},
  {name="Сундук 217", x=1680.843994, y=244.343994, z=-1327.409058},
  {name="Сундук 218", x=1614.798950, y=261.210999, z=-1282.759033},
  {name="Сундук 219", x=1807.250977, y=194.873993, z=-1507.599976},
  {name="Сундук 220", x=1996.008057, y=268.303009, z=-542.007996},
  {name="Сундук 221", x=1401.708984, y=305.037994, z=-1267.203003},
  {name="Сундук 222", x=1803.921997, y=241.042007, z=-1196.380005},
  {name="Сундук 223", x=1679.405029, y=267.664001, z=-1187.904053},
  {name="Сундук 224", x=1710.454956, y=262.273987, z=-1274.052979},
  {name="Сундук 225", x=1974.698975, y=236.983994, z=-1534.025024},
  {name="Сундук 226", x=1662.515015, y=248.645004, z=-1203.899048},
  {name="Сундук 227", x=1883.689941, y=243.750000, z=-867.450989},
  {name="Сундук 228", x=1685.076050, y=213.983994, z=-384.356995},
  {name="Сундук 229", x=1933.563965, y=226.315002, z=-907.732971},
  {name="Сундук 230", x=1551.478027, y=204.145004, z=-467.058014},
  {name="Сундук 231", x=1703.619995, y=255.996994, z=-739.039001},
  {name="Сундук 232", x=2224.224121, y=271.484985, z=-272.243988},
  {name="Сундук 233", x=2193.038086, y=208.988007, z=-1050.246948},
  {name="Сундук 234", x=1766.255005, y=224.514008, z=-415.932007},
  {name="Сундук 235", x=1674.456055, y=221.371994, z=-525.862000},
  {name="Сундук 236", x=1941.469971, y=246.354004, z=-911.939026},
  {name="Сундук 237", x=1741.590942, y=256.850006, z=-825.969971},
  {name="Сундук 238", x=1970.727051, y=240.123001, z=-370.910004},
  {name="Сундук 239", x=1954.817017, y=217.615005, z=-643.169006},
  {name="Сундук 240", x=1839.696045, y=227.520004, z=-723.348999},
  {name="Сундук 241", x=1792.609985, y=242.973999, z=-821.528992},
  {name="Сундук 242", x=1640.089966, y=258.221008, z=-599.263000},
  {name="Сундук 243", x=1900.854004, y=206.546005, z=-166.667999},
  {name="Сундук 244", x=2419.101074, y=240.876007, z=-400.299988},
  {name="Сундук 245", x=1784.836060, y=247.145004, z=-604.708984},
  {name="Сундук 246", x=2642.032959, y=230.365997, z=23.584000},
  {name="Сундук 247", x=1790.927002, y=255.024994, z=-516.369995},
  {name="Сундук 248", x=1850.667969, y=226.701004, z=-391.480011},
  {name="Сундук 249", x=1807.532959, y=204.824997, z=-274.083008},
  {name="Сундук 250", x=1756.202026, y=216.783005, z=-358.748993},
  {name="Сундук 251", x=1738.833984, y=219.720993, z=-393.545990},
  {name="Сундук 252", x=1746.939941, y=238.537994, z=-628.411987},
  {name="Сундук 253", x=2851.069092, y=254.589005, z=-1734.905029},
  {name="Сундук 254", x=1811.538940, y=217.897995, z=-442.796997},
  {name="Сундук 255", x=2548.699951, y=205.449997, z=207.300003},
  {name="Сундук 256", x=1480.607056, y=263.644012, z=-1355.787964},
  {name="Сундук 257", x=2564.602051, y=235.511002, z=-1523.883057},
  {name="Сундук 258", x=2386.092041, y=211.889008, z=-1192.621948},
  {name="Сундук 259", x=2508.992920, y=224.475998, z=-1440.076050},
  {name="Сундук 260", x=2566.449951, y=214.347000, z=-1403.732056},
  {name="Сундук 261", x=2377.750000, y=283.093994, z=-341.669006},
  {name="Сундук 262", x=2495.104004, y=202.893997, z=-1094.026001},
  {name="Сундук 263", x=2412.136963, y=208.455002, z=-1290.343994},
  {name="Сундук 264", x=2530.708008, y=209.804993, z=-1271.498047},
  {name="Сундук 265", x=2606.999023, y=180.003006, z=411.500000},
  {name="Сундук 266", x=2530.605957, y=206.559998, z=-1159.925049},
  {name="Сундук 267", x=2262.936035, y=204.328003, z=-1099.876953},
  {name="Сундук 268", x=2645.142090, y=202.981003, z=-2368.358887},
  {name="Сундук 269", x=2652.396973, y=325.010010, z=132.080002},
  {name="Сундук 270", x=1943.072021, y=206.447006, z=-1526.151978},
  {name="Сундук 271", x=2204.229980, y=211.391998, z=-516.335022},
  {name="Сундук 272", x=2632.947998, y=193.567001, z=-2376.347900},
  {name="Сундук 273", x=2960.175049, y=199.625000, z=-1425.932983},
  {name="Сундук 274", x=2336.230957, y=295.636993, z=-120.724998},
  {name="Сундук 275", x=1458.458008, y=289.592010, z=-1271.694946},
  {name="Сундук 276", x=2730.199951, y=240.399994, z=316.500000},
  {name="Сундук 277", x=2373.156006, y=299.282013, z=-649.940979},
  {name="Сундук 278", x=2245.895996, y=264.260986, z=-751.169006},
  {name="Сундук 279", x=1211.630005, y=274.101990, z=-1696.167969},
  {name="Сундук 280", x=2767.248047, y=212.070999, z=106.982002},
  {name="Сундук 281", x=2693.160889, y=196.102997, z=-1789.152954},
  {name="Сундук 282", x=2586.199951, y=210.800003, z=455.000000},
  {name="Сундук 283", x=2540.783936, y=242.559998, z=-1793.504028},
  {name="Сундук 284", x=2603.100098, y=229.600006, z=153.500000},
  {name="Сундук 285", x=2994.027100, y=211.074997, z=59.270000},
  {name="Сундук 286", x=2667.801025, y=212.035004, z=285.098999},
  {name="Сундук 287", x=2716.100098, y=207.132996, z=344.200012},
  {name="Сундук 288", x=1749.548950, y=214.919998, z=-1375.376953},
  {name="Сундук 289", x=2745.102051, y=218.945007, z=229.500000},
  {name="Сундук 290", x=2624.500000, y=206.824997, z=357.501007},
  {name="Сундук 291", x=2548.798096, y=207.050003, z=250.399002},
  {name="Сундук 292", x=1632.765015, y=266.484009, z=-755.758972},
  {name="Сундук 293", x=2635.698975, y=206.949997, z=-6.801000},
  {name="Сундук 294", x=2212.398926, y=215.324005, z=-38.700001},
  {name="Сундук 295", x=2449.500000, y=263.154999, z=364.199005},
  {name="Сундук 296", x=2475.800049, y=217.970001, z=-61.000000},
  {name="Сундук 297", x=2498.000000, y=210.154007, z=366.001007},
  {name="Сундук 298", x=2383.699951, y=222.500000, z=383.200012},
  {name="Сундук 299", x=2444.699951, y=220.028000, z=210.100006},
  {name="Сундук 300", x=1513.793945, y=292.156006, z=-1204.583008},
  {name="Сундук 301", x=1490.703003, y=244.061996, z=-1578.707031},
  {name="Сундук 302", x=2048.398926, y=208.274994, z=-66.899002},
  {name="Сундук 303", x=2144.300049, y=209.500000, z=-64.099998},
  {name="Сундук 304", x=1829.229004, y=245.757996, z=-725.125977},
  {name="Сундук 305", x=2940.899902, y=216.000000, z=291.700012},
  {name="Сундук 306", x=2888.500000, y=209.399994, z=-55.400002},
  {name="Сундук 307", x=1652.142944, y=268.209991, z=-969.098022},
  {name="Сундук 308", x=1456.303955, y=268.411011, z=-1562.121948},
  {name="Сундук 309", x=1576.026001, y=294.191010, z=-1199.781006},
  {name="Сундук 310", x=2908.096924, y=259.295990, z=-1655.806030},
  {name="Сундук 311", x=2447.010986, y=290.460999, z=-1570.743042},
  {name="Сундук 312", x=1530.343994, y=288.015015, z=-1291.636963},
  {name="Сундук 313", x=2054.699951, y=254.000000, z=-447.100006},
  {name="Сундук 314", x=1724.686035, y=236.873993, z=-1159.682007},
  {name="Сундук 315", x=2097.825928, y=213.522995, z=-1313.637939},
  {name="Сундук 316", x=2818.013916, y=261.722992, z=-1677.086060},
  {name="Сундук 317", x=2706.940918, y=273.718994, z=-1579.951050},
  {name="Сундук 318", x=2467.971924, y=206.294006, z=-1234.311035},
  {name="Сундук 319", x=2545.708984, y=205.438004, z=-1201.069946},
  {name="Сундук 320", x=2035.947021, y=210.455994, z=-1013.015991},
  {name="Сундук 321", x=2315.761963, y=216.858002, z=-1096.505981},
  {name="Сундук 322", x=2316.803955, y=231.061005, z=-1222.108032},
  {name="Сундук 323", x=2607.899902, y=206.899994, z=-61.200001},
  {name="Сундук 324", x=1252.682983, y=261.856995, z=-1647.305054},
  {name="Сундук 325", x=1196.667969, y=259.114990, z=-1546.702026},
  {name="Сундук 326", x=1295.422974, y=255.516006, z=-1512.473999},
  {name="Сундук 327", x=1263.443970, y=255.143997, z=-1534.750977},
  {name="Сундук 328", x=1908.795044, y=242.613998, z=-640.333008},
  {name="Сундук 329", x=1299.045044, y=267.468994, z=-1702.357056},
  {name="Сундук 330", x=2492.100098, y=253.994995, z=-334.200012},
  {name="Сундук 331", x=2648.760986, y=264.608002, z=147.712006},
  {name="Сундук 332", x=2086.500000, y=235.100006, z=-596.599976},
  {name="Сундук 333", x=1669.553955, y=259.053986, z=-711.758972},
  {name="Сундук 334", x=1573.832031, y=336.955994, z=-2119.043945},
  {name="Сундук 335", x=1787.139038, y=260.520996, z=-1024.970947},
  {name="Сундук 336", x=1927.015015, y=216.561996, z=-1130.538940},
  {name="Сундук 337", x=1791.250000, y=218.274994, z=-375.875000},
  {name="Сундук 338", x=1246.858032, y=263.177002, z=-1723.071045},
  {name="Сундук 339", x=2656.370117, y=246.774002, z=-1210.932007},
  {name="Сундук 340", x=1505.573975, y=231.324005, z=-357.914001},
  {name="Сундук 341", x=1997.862061, y=243.237000, z=-549.026978},
  {name="Сундук 342", x=2678.148926, y=195.768997, z=-2338.802979},
  {name="Сундук 343", x=2409.323975, y=208.444000, z=-1284.600952},
  {name="Сундук 344", x=1356.083008, y=256.151001, z=-1675.384033},
  {name="Сундук 345", x=2332.298096, y=308.128998, z=-1765.116943},
  {name="Сундук 346", x=2551.253906, y=322.941010, z=-1658.493042},
  {name="Сундук 347", x=2206.064941, y=213.755005, z=-1484.890015},
  {name="Сундук 348", x=1417.578003, y=317.917999, z=-1968.956055},
  {name="Сундук 349", x=1312.865967, y=271.494995, z=-1501.027954},
  {name="Сундук 350", x=2239.487061, y=243.764008, z=-1579.233032},
  {name="Сундук 351", x=2700.209961, y=279.049988, z=-1493.186035},
  {name="Сундук 352", x=2872.100098, y=218.656998, z=-98.500000},
  {name="Сундук 353", x=1750.437012, y=195.542999, z=-1522.657959},
  {name="Сундук 354", x=2465.954102, y=264.863007, z=-1508.057007},
  {name="Сундук 355", x=2237.399902, y=268.641998, z=-299.799988},
  {name="Сундук 356", x=2667.160889, y=300.648987, z=132.182007},
  {name="Сундук 357", x=2699.856934, y=226.563004, z=84.863998},
  {name="Сундук 358", x=1960.776978, y=196.779999, z=-1169.663940},
  {name="Сундук 359", x=2726.199951, y=251.953003, z=-347.399994},
}

-- читаем индекс из файла
local function read_idx()
  local f = io.open(PATH, "r")
  if f then
    local s = f:read("*l")
    f:close()
    local n = tonumber(s)
    if n and n >= 1 and n <= #W then return n end
  end
  return 1
end

-- пишем индекс в файл
local function write_idx(n)
  local ok, err = pcall(function()
    local f = io.open(PATH, "w")
    if f then f:write(tostring(n)); f:close() end
  end)
  if not ok then
    show("Ошибка записи: " .. tostring(err))
  end
end

-- основной шаг
local idx = read_idx()
local wp  = W[idx]

-- тп
local pos = Vector3(wp.x, wp.y, wp.z)
CS.MoleMole.ActorUtils.SetAvatarPos(pos)
show(string.format("TP %d/%d: %s  (X:%.2f Y:%.2f Z:%.2f)  [next-> %d]",
  idx, #W, wp.name, wp.x, wp.y, wp.z, (idx % #W) + 1))

-- следующий индекс (циклично) и сохранение
idx = idx + 1
if idx > #W then idx = 1 end
write_idx(idx)
