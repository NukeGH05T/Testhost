local PATH = "tp_idx.txt"
local Vector3 = CS.UnityEngine.Vector3

local function show(msg)
  if CS and CS.MoleMole and CS.MoleMole.ActorUtils and CS.MoleMole.ActorUtils.ShowMessage then
    CS.MoleMole.ActorUtils.ShowMessage(tostring(msg))
  else
    print(tostring(msg))
  end
end

-- 替换tp坐标 --
local W = {
  {name="daoqibaoxiang",  x=-2302.05, y=211.08, z=-3595.50},
  {name="daoqibaoxiang1",  x=-1753.13, y=201.63, z=-4106.43},
  {name="daoqibaoxiang2",  x=-1842.23, y=210.14, z=-4221.94},
  {name="daoqibaoxiang3",  x=-1828.66, y=206.58, z=-4217.56},
  {name="daoqibaoxiang4",  x=-1830.84, y=200.89, z=-4294.49},
  {name="daoqibaoxiang5",  x=-1874.41, y=224.38, z=-4228.54},
  {name="daoqibaoxiang7",  x=-2714.16, y=201.49, z=-3956.18},
  {name="daoqibaoxiang8",  x=-2718.27, y=203.08, z=-4021.79},
  {name="daoqibaoxiang9",  x=-2706.24, y=211.23, z=-4038.28},
  {name="daoqibaoxiang10",  x=-2771.16, y=200.83, z=-3998.38},
  {name="daoqibaoxiang11",  x=-2835.95, y=201.28, z=-4019.66},
  {name="daoqibaoxiang12",  x=-2832.04, y=206.12, z=-4118.04},
  {name="daoqibaoxiang13",  x=-2806.06, y=208.85, z=-4187.33},
  {name="daoqibaoxiang14",  x=-2771.52, y=217.45, z=-4230.33},
  {name="daoqibaoxiang15",  x=-2798.67, y=208.85, z=-4258.19},
  {name="daoqibaoxiang16",  x=-2866.78, y=200.99, z=-4281.76},
  {name="daoqibaoxiang17",  x=-2621.29, y=201.61, z=-4092.35},
  {name="daoqibaoxiang18",  x=-2623.74, y=212.97, z=-4132.02},
  {name="daoqibaoxiang19",  x=-2612.94, y=221.37, z=-4190.04},
  {name="daoqibaoxiang20",  x=-2507.77, y=201.92, z=-4114.92},
  {name="daoqibaoxiang21",  x=-2437.66, y=228.01, z=-4204.23},
  {name="daoqibaoxiang22",  x=-2403.37, y=205.57, z=-4175.38},
  {name="daoqibaoxiang23",  x=-2322.25, y=240.40, z=-4176.81},
  {name="daoqibaoxiang24",  x=-2283.17, y=203.41, z=-4207.46},
  {name="daoqibaoxiang25",  x=-3095.66, y=244.69, z=-4378.61},
  {name="daoqibaoxiang26",  x=-2460.38, y=259.10, z=-4258.56},
  {name="daoqibaoxiang27",  x=-2341.65, y=213.47, z=-4402.26},
  {name="daoqibaoxiang28",  x=-2376.41, y=240.31, z=-4464.30},
  {name="daoqibaoxiang29",  x=-2428.88, y=304.41, z=-4417.63},
  {name="daoqibaoxiang30",  x=-2438.03, y=247.76, z=-4507.44},
  {name="daoqibaoxiang31",  x=-2454.47, y=200.97, z=-4645.61},
  {name="daoqibaoxiang32",  x=-2472.70, y=205.83, z=-4673.28},
  {name="daoqibaoxiang33",  x=-2324.18, y=166.72, z=-4815.00},
  {name="daoqibaoxiang34",  x=-2248.91, y=201.10, z=-4844.05},
  {name="daoqibaoxiang35",  x=-2240.11, y=155.17, z=-4845.08},
  {name="daoqibaoxiang36",  x=-2222.30, y=156.14, z=-4923.98},
  {name="daoqibaoxiang37",  x=-2457.75, y=337.47, z=-4313.50},
  {name="daoqibaoxiang37",  x=-3247.15, y=204.99, z=-3884.51},
  {name="daoqibaoxiang38",  x=-2494.44, y=278.36, z=-4280.11},
  {name="daoqibaoxiang39",  x=-2569.20, y=243.07, z=-4303.72},
  {name="daoqibaoxiang40",  x=-2699.12, y=232.91, z=-4277.96},
  {name="daoqibaoxiang41",  x=-2488.83, y=394.73, z=-4429.77},
  {name="daoqibaoxiang42",  x=-2487.88, y=242.71, z=-4461.36},
  {name="daoqibaoxiang43",  x=-2686.83, y=252.26, z=-4474.88},
  {name="daoqibaoxiang44",  x=-2894.71, y=205.22, z=-4206.98},
  {name="daoqibaoxiang45",  x=-2967.83, y=202.18, z=-4117.68},
  {name="daoqibaoxiang46",  x=-2964.99, y=206.26, z=-4069.39},
  {name="daoqibaoxiang47",  x=-2965.47, y=202.36, z=-3925.14},
  {name="daoqibaoxiang48",  x=-2747.78, y=215.27, z=-4338.03},
  {name="daoqibaoxiang49",  x=-2822.16, y=225.83, z=-4407.00},
  {name="daoqibaoxiang50",  x=-2835.51, y=202.06, z=-4570.82},
  {name="daoqibaoxiang51",  x=-2694.94, y=205.68, z=-4636.00},
  {name="daoqibaoxiang52",  x=-2110.49, y=164.90, z=-4386.84},
  {name="daoqibaoxiang53 wajue",  x=-3337.61, y=206.03, z=-4261.58},
  {name="daoqibaoxiang54 wajue",  x=-3374.48, y=201.67, z=-4287.12},
  {name="daoqibaoxiang55",  x=-3033.21, y=219.57, z=-4426.79},
  {name="daoqibaoxiang56",  x=-3057.93, y=238.14, z=-4440.68},
  {name="daoqibaoxiang57",  x=-3100.10, y=248.91, z=-4449.43},
  {name="daoqibaoxiang58",  x=-3113.41, y=227.26, z=-4363.79},
  {name="daoqibaoxiang59",  x=-3153.66, y=249.43, z=-4404.22},
  {name="daoqibaoxiang60",  x=-3425.02, y=342.13, z=-4610.02},
  {name="daoqibaoxiang61",  x=-3391.76, y=283.31, z=-4512.50},
  {name="daoqibaoxiang62",  x=-3356.26, y=294.93, z=-4531.52},
  {name="daoqibaoxiang63",  x=-3319.30, y=269.38, z=-4458.59},
  {name="daoqibaoxiang64",  x=-3275.71, y=268.54, z=-4515.29},
  {name="daoqibaoxiang65",  x=-3243.85, y=272.20, z=-4563.16},
  {name="daoqibaoxiang66",  x=-3278.14, y=296.57, z=-4599.65},
  {name="daoqibaoxiang67",  x=-3233.81, y=200.86, z=-3898.27},
  {name="daoqibaoxiang69",  x=-3126.22, y=202.32, z=-3258.00},
  {name="daoqibaoxiang70",  x=-3197.77, y=209.87, z=-3392.50},
  {name="daoqibaoxiang71",  x=-3128.10, y=203.96, z=-3462.21},
  {name="daoqibaoxiang72",  x=-3148.54, y=201.29, z=-3530.06},
  {name="daoqibaoxiang73",  x=-3251.78, y=224.78, z=-3474.16},
  {name="daoqibaoxiang74",  x=-3263.09, y=206.87, z=-3609.02},
  {name="daoqibaoxiang75",  x=-3305.10, y=209.45, z=-3564.56},
  {name="daoqibaoxiang76",  x=-3354.51, y=202.81, z=-3707.13},
  {name="daoqibaoxiang77",  x=-3399.79, y=203.56, z=-3427.39},
  {name="daoqibaoxiang78",  x=-3565.21, y=201.26, z=-3429.65},
  {name="daoqibaoxiang79",  x=-3502.75, y=202.32, z=-3194.35},
  {name="daoqibaoxiang80",  x=-3557.91, y=224.35, z=-3269.84},
  {name="daoqibaoxiang81",  x=-3744.87, y=201.05, z=-3359.32},
  {name="daoqibaoxiang82",  x=-3525.77, y=201.21, z=-3037.03},
  {name="daoqibaoxiang83",  x=-3543.12, y=208.98, z=-3045.21},
  {name="daoqibaoxiang84",  x=-3589.92, y=242.27, z=-3115.45},
  {name="daoqibaoxiang85",  x=-3626.36, y=201.52, z=-2990.14},
  {name="daoqibaoxiang86",  x=-3713.42, y=201.47, z=-2861.37},
  {name="daoqibaoxiang87",  x=-3715.79, y=261.35, z=-2969.38},
  {name="daoqibaoxiang88",  x=-3853.20, y=230.26, z=-2978.15},
  {name="daoqibaoxiang89",  x=-3910.08, y=205.64, z=-3025.79},
  {name="daoqibaoxiang90",  x=-3950.72, y=203.00, z=-2958.00},
  {name="daoqibaoxiang91",  x=-3985.04, y=201.17, z=-3035.59},
  {name="daoqibaoxiang92",  x=-4032.13, y=200.99, z=-3183.91},
  {name="daoqibaoxiang93",  x=-3966.19, y=256.15, z=-3157.85},
  {name="daoqibaoxiang94",  x=-3932.95, y=202.10, z=-3318.82},
  {name="daoqibaoxiang95",  x=-3834.76, y=201.26, z=-3275.56},
  {name="daoqibaoxiang96",  x=-3730.16, y=231.06, z=-3259.50},
  {name="daoqibaoxiang97",  x=-3659.62, y=230.79, z=-3088.52},
  {name="daoqibaoxiang98",  x=-3832.53, y=255.09, z=-3146.59},
  {name="daoqibaoxiang99",  x=-3543.74, y=216.61, z=-3279.23},
  {name="daoqibaoxiang100",  x=-3665.52, y=207.80, z=-3182.15},
  {name="daoqibaoxiang101",  x=-3789.80, y=206.42, z=-3191.38},
  {name="daoqibaoxiang102",  x=-3838.87, y=238.18, z=-3229.44},
  {name="daoqibaoxiang103",  x=-3812.51, y=218.73, z=-3242.67},
  {name="daoqibaoxiang104",  x=-3896.39, y=365.25, z=-3159.44},
  {name="daoqibaoxiang105",  x=-3798.09, y=202.57, z=-3087.13},
  {name="daoqibaoxiang106",  x=-3580.49, y=201.05, z=-2878.36},
  {name="daoqibaoxiang107",  x=-3555.36, y=201.57, z=-2812.36},
  {name="daoqibaoxiang108",  x=-3448.89, y=201.70, z=-2776.83},
  {name="daoqibaoxiang109",  x=-3579.58, y=216.98, z=-2271.58},
  {name="daoqibaoxiang110",  x=-3516.71, y=207.02, z=-2281.67},
  {name="daoqibaoxiang111",  x=-3464.40, y=208.45, z=-2150.74},
  {name="daoqibaoxiang112",  x=-3594.09, y=250.75, z=-2081.98},
  {name="daoqibaoxiang113",  x=-3669.29, y=229.97, z=-1973.65},
  {name="daoqibaoxiang114",  x=-3587.77, y=202.03, z=-1799.72},
  {name="daoqibaoxiang115 wajue",  x=-3589.49, y=202.21, z=-1776.92},
  {name="daoqibaoxiang116",  x=-3757.42, y=201.32, z=-1660.44},
  {name="daoqibaoxiang117",  x=-3750.09, y=206.65, z=-1818.03},
  {name="daoqibaoxiang118",  x=-3674.56, y=205.22, z=-2249.34},
  {name="daoqibaoxiang119",  x=-3656.46, y=233.44, z=-2264.20},
  {name="daoqibaoxiang120",  x=-3816.35, y=238.65, z=-2118.10},
  {name="daoqibaoxiang121",  x=-3803.23, y=265.80, z=-2298.42},
  {name="daoqibaoxiang122",  x=-3693.83, y=248.28, z=-2322.57},
  {name="daoqibaoxiang123",  x=-3702.36, y=251.69, z=-2356.73},
  {name="daoqibaoxiang124",  x=-3738.85, y=242.70, z=-2449.86},
  {name="daoqibaoxiang125",  x=-3801.36, y=217.05, z=-2579.07},
  {name="daoqibaoxiang126",  x=-3827.70, y=293.16, z=-2355.96},
  {name="daoqibaoxiang127",  x=-3900.84, y=259.42, z=-2479.97},
  {name="daoqibaoxiang128",  x=-3896.04, y=261.74, z=-2457.74},
  {name="daoqibaoxiang129",  x=-3957.56, y=362.83, z=-2435.62},
  {name="daoqibaoxiang130",  x=-3961.51, y=200.80, z=-2470.14},
  {name="daoqibaoxiang131",  x=-3893.59, y=326.78, z=-2408.06},
  {name="daoqibaoxiang132",  x=-3981.32, y=256.18, z=-2368.71},
  {name="daoqibaoxiang133",  x=-3990.23, y=223.84, z=-2505.90},
  {name="daoqibaoxiang134",  x=-3903.96, y=214.82, z=-2080.44},
  {name="daoqibaoxiang135",  x=-4077.38, y=200.98, z=-2153.11},
  {name="daoqibaoxiang136",  x=-4126.91, y=202.22, z=-2351.54},
  {name="daoqibaoxiang137",  x=-3941.95, y=244.48, z=-2240.97},
  {name="daoqibaoxiang138",  x=-3691.42, y=203.64, z=-1384.18},
  {name="daoqibaoxiang139",  x=-3762.83, y=201.64, z=-1381.09},
  {name="daoqibaoxiang140",  x=-4044.99, y=206.83, z=-1412.23},
  {name="daoqibaoxiang141",  x=-4024.45, y=208.28, z=-1265.94},
  {name="daoqibaoxiang142",  x=-4099.19, y=200.75, z=-1097.06},
  {name="daoqibaoxiang143",  x=-4017.54, y=208.89, z=-994.02},
  {name="daoqibaoxiang144",  x=-3869.40, y=122.58, z=-1003.50},
  {name="daoqibaoxiang145",  x=-3656.39, y=201.31, z=-1011.07},
  {name="daoqibaoxiang146",  x=-3610.27, y=211.43, z=-949.67},
  {name="daoqibaoxiang147",  x=-3733.33, y=127.86, z=-918.63},
  {name="daoqibaoxiang148",  x=-3721.76, y=113.75, z=-859.51},
  {name="daoqibaoxiang149",  x=-3536.65, y=203.41, z=-794.66},
  {name="daoqibaoxiang150",  x=-3453.38, y=201.01, z=-734.89},
  {name="daoqibaoxiang151",  x=-3597.93, y=218.24, z=-636.36},
  {name="daoqibaoxiang152",  x=-3579.04, y=201.52, z=-498.22},
  {name="daoqibaoxiang153",  x=-3655.46, y=122.74, z=-756.51},
  {name="daoqibaoxiang154",  x=-3721.17, y=125.44, z=-662.42},
  {name="daoqibaoxiang155",  x=-3658.31, y=185.40, z=-583.26},
  {name="daoqibaoxiang156",  x=-3772.45, y=205.57, z=-491.92},
  {name="daoqibaoxiang157",  x=-3869.82, y=203.10, z=-435.45},
  {name="daoqibaoxiang158",  x=-3986.78, y=203.67, z=-468.72},
  {name="daoqibaoxiang159",  x=-4049.09, y=206.75, z=-364.91},
  {name="daoqibaoxiang160",  x=-3841.91, y=130.49, z=-697.32},
  {name="daoqibaoxiang161",  x=-3784.65, y=111.23, z=-790.10},
  {name="daoqibaoxiang162",  x=-3771.07, y=121.53, z=-848.03},
  {name="daoqibaoxiang163",  x=-3935.54, y=132.05, z=-699.59},
  {name="daoqibaoxiang164",  x=-4010.61, y=227.05, z=-650.36},
  {name="daoqibaoxiang165",  x=-3937.60, y=108.28, z=-854.56},
  {name="daoqibaoxiang166",  x=-3429.33, y=206.59, z=-1007.04},
  {name="daoqibaoxiang167",  x=-4761.01, y=206.20, z=-2518.09},
  {name="daoqibaoxiang168",  x=-4986.17, y=206.97, z=-2720.72},
  {name="daoqibaoxiang169",  x=-5038.41, y=206.91, z=-2714.56},
  {name="daoqibaoxiang170",  x=-4245.97, y=201.86, z=-3765.01},
  {name="daoqibaoxiang171",  x=-4216.23, y=201.31, z=-3885.59},
  {name="daoqibaoxiang172",  x=-4365.74, y=210.36, z=-3729.79},
  {name="daoqibaoxiang173",  x=-4402.36, y=200.80, z=-3652.30},
  {name="daoqibaoxiang174",  x=-4322.40, y=202.01, z=-3850.59},
  {name="daoqibaoxiang175",  x=-4343.19, y=219.74, z=-3880.29},
  {name="daoqibaoxiang176",  x=-4344.02, y=205.29, z=-3938.47},
  {name="daoqibaoxiang177",  x=-4425.52, y=221.92, z=-3880.45},
  {name="daoqibaoxiang178",  x=-4478.93, y=215.26, z=-3847.09},
  {name="daoqibaoxiang179",  x=-4425.00, y=218.51, z=-3835.38},
  {name="daoqibaoxiang180",  x=-4404.23, y=161.34, z=-3801.69},
  {name="daoqibaoxiang181",  x=-4431.79, y=166.01, z=-3775.29},
  {name="daoqibaoxiang182",  x=-4419.11, y=196.48, z=-3783.17},
  {name="daoqibaoxiang183",  x=-4486.11, y=201.41, z=-3769.75},
  {name="daoqibaoxiang184",  x=-4242.25, y=224.37, z=-4222.58},
  {name="daoqibaoxiang185",  x=-4234.70, y=201.28, z=-4314.98},
  {name="daoqibaoxiang186",  x=-4316.01, y=225.22, z=-4225.20},
  {name="daoqibaoxiang187",  x=-4353.26, y=208.86, z=-4208.66},
  {name="daoqibaoxiang188",  x=-4411.46, y=202.68, z=-4224.00},
  {name="daoqibaoxiang189",  x=-4354.24, y=207.45, z=-4359.25},
  {name="daoqibaoxiang190",  x=-4258.26, y=206.07, z=-4482.53},
  {name="daoqibaoxiang191",  x=-4439.45, y=224.65, z=-4542.79},
  {name="daoqibaoxiang192",  x=-4617.77, y=203.88, z=-4613.96},
  {name="daoqibaoxiang193",  x=-4710.95, y=200.89, z=-4628.78},
  {name="daoqibaoxiang194",  x=-4816.15, y=200.95, z=-4448.75},
  {name="daoqibaoxiang195",  x=-4819.88, y=219.98, z=-4722.47},
  {name="daoqibaoxiang196",  x=-4819.20, y=215.01, z=-4710.76},
  {name="daoqibaoxiang197",  x=-4967.94, y=203.83, z=-4637.59},
  {name="daoqibaoxiang198",  x=-5001.39, y=203.71, z=-4220.78},
  {name="daoqibaoxiang199",  x=-4895.07, y=201.56, z=-4238.70},
  {name="daoqibaoxiang200",  x=-4892.52, y=200.80, z=-4313.55},
  {name="daoqibaoxiang201",  x=-4666.72, y=162.28, z=-4277.68},
  {name="daoqibaoxiang202",  x=-4683.05, y=154.96, z=-4255.22},
  {name="daoqibaoxiang203",  x=-4672.82, y=200.51, z=-3951.11},
  {name="daoqibaoxiang204",  x=-4873.92, y=201.00, z=-3919.73},
  {name="daoqibaoxiang205",  x=-6032.72, y=201.14, z=-3204.33},
  {name="daoqibaoxiang206",  x=-6226.79, y=201.27, z=-3223.95},
  {name="daoqibaoxiang207",  x=-6272.64, y=203.27, z=-3145.66},
  {name="daoqibaoxiang208",  x=-6665.60, y=213.55, z=-2574.70},
  {name="daoqibaoxiang209",  x=-6753.31, y=202.63, z=-2606.56},
  {name="daoqibaoxiang210",  x=-6745.26, y=206.03, z=-2683.65},
  {name="daoqibaoxiang211",  x=-6734.29, y=202.05, z=-2751.79},
  {name="daoqibaoxiang212 daileiyuansu",  x=-2817.28, y=218.38, z=-4044.21},
  {name="daoqibaoxiang213",  x=-2336.43, y=192.27, z=-4276.09},
  {name="daoqibaoxiang214",  x=-3854.29, y=207.20, z=-2983.16},
  {name="daoqibaoxiang215",  x=-3580.07, y=183.42, z=-737.55},
  {name="daoqibaoxiang216",  x=-3597.29, y=124.07, z=-748.23},
  {name="daoqibaoxiang217",  x=-3707.43, y=129.13, z=-1000.88},
}

local function read_idx()
  local f = io.open(PATH, "r")
  if f then
    local s = f:read("*l")
    f:close()
    local n = tonumber(s)
    if n and n >= 1 and n <= #W then return n end
  end
  return 1
end

local function write_idx(n)
  local okw, err = pcall(function()
    local f = io.open(PATH, "w")
    if f then f:write(tostring(n)); f:close() end
  end)
  if not okw then
    show("写入错误: " .. tostring(err))
  end
end

local idx = read_idx()
local wp = W[idx]
local pos = Vector3(wp.x, wp.y, wp.z)
CS.MoleMole.ActorUtils.SetAvatarPos(pos)
show(string.format("TP %d/%d: %s  (X:%.2f Y:%.2f Z:%.2f)  [next-> %d]",
  idx, #W, wp.name, wp.x, wp.y, wp.z, (idx % #W) + 1))
idx = idx + 1
if idx > #W then idx = 1 end
write_idx(idx)